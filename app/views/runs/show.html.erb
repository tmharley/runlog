<% provide(:title, 'View run') %>

<p id="notice"><%= notice %></p>

<div class="page-header">
  <% if @run.is_race? %>
    <h1><%= @run.race_name? ? @run.race_name : "#{@run.time_of_day} race" %></h1>
  <% else %>
    <h1><%= @run.time_of_day %> run</h1>
  <% end %>
  <h2><%= @run.start_time_local_date_string %></h2>
</div>

<div class="panel panel-info">
  <div class="panel-heading">Details</div>
  <div class="panel-body container">
    <div class="row">
      <div class="col-md-4">
        <h3>Start time</h3>
        <p class="details">
          <%= build_glyphicon('calendar') %>
          <%= @run.start_time_local_time_string %>
        </p>
      </div>
      <% if @run.is_distance_record? %>
      <div class="col-md-4 dist_record">
      <% else %>
      <div class="col-md-4">
      <% end %>
        <h3>Total distance</h3>
        <p class="details">
          <%= build_glyphicon('road') %>
          <%= '%.2f' % @run.distance %> miles
        </p>
      </div>
      <% if @run.duration? %>
      <div class="col-md-4">
        <h3>Total duration</h3>
        <p class="details">
          <%= build_glyphicon('time') %>
          <%= @run.duration_string %>
        </p>
      </div>
      <% end %>
    </div>
    <div class="row">
      <% if @run.duration? %>
        <% if @run.is_pace_record? %>
      <div class="col-md-4 pace_record">
        <% else %>
      <div class="col-md-4">
        <% end %>
        <h3>Average pace</h3>
        <p class="details">
          <%= build_glyphicon('flash') %>
          <%= @run.pace_string %>
        </p>
      </div>
      <% end %>
      <% unless @run.temperature.nil? %>
        <div class="col-md-4 <%= 'precip' if @run.precip? %>">
        <h3>Start temperature</h3>
        <p class="details <%= temp_class(@run.temperature) %>">
          <%= build_glyphicon(@run.precip? ? 'tint' : 'certificate') %>
          <%= @run.temperature %>&deg;F
        </p>
      </div>
      <% end %>
      <% unless @run.elev_gain.nil? %>
        <div class="col-md-4">
          <h3>Total elevation gain</h3>
          <p class="details">
            <%= build_glyphicon('chevron-up') %>
            <%= @run.elev_gain %> feet
          </p>
        </div>
      <% end %>
    </div>
  </div>
</div>

<% if @run.shoe %>
<div class="panel panel-info">
  <div class="panel-heading">Shoes</div>
  <div class="panel-body">
    <%= link_to [@run.shoe.manufacturer, @run.shoe.model].join(' '),
                shoe_path(@run.shoe),
                style: "background: ##{@run.shoe.dark_color.hex};
                color: ##{@run.shoe.bright_color.hex}" %>
  </div>
</div>
<% end %>

<% unless @run.notes.blank? %>
<div class="panel panel-info">
  <div class="panel-heading">Notes</div>
  <div class="panel-body"><%= @run.notes %></div>
</div>
<% end %>

<% unless @run.sip_plus.nil? %>
<div class="panel panel-info">
  <div class="panel-heading">SIP+</div>
  <div class="panel-body"><%= '%d' % @run.sip_plus %></div>
</div>
<% end %>

<div class="btn-toolbar" role="toolbar">
  <div class="btn-group">
    <%= link_to 'All Runs', runs_path, class: "btn btn-info" %>
  </div>
  <div class="btn-group">
    <%= link_to 'New Run', new_run_path, class: "btn btn-success" %>
  </div>
  <div class="btn-group">
    <%= link_to 'Edit', edit_run_path(@run), class: "btn btn-warning" %>
    <%= link_to 'Delete', @run, data: {confirm: 'Are you sure?'}, method: :delete, class: "btn btn-danger" %>
  </div>
</div>
